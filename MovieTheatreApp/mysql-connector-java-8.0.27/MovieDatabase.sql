DROP DATABASE IF EXISTS MOVIESYSTEM;
CREATE DATABASE MOVIESYSTEM;
USE MOVIESYSTEM;

DROP TABLE IF EXISTS  MOVIE;
CREATE TABLE MOVIE(
	MovieID int NOT NULL AUTO_INCREMENT,
	Title varchar(50) NOT NULL,
    Synopsis varchar(50),
    PRIMARY KEY(MovieID)
);
INSERT INTO MOVIE(Title, Synopsis)
 VALUES
 ("Starwars", "A long time ago"),
 ("Spiderman", "No way home"),
 ("Silent Night", ""),
 ("James Bond", "007"),
 ("Step Brothers", "Brothers of step"),
 ("Ghostbusters", "spooky"),
 ("Fast and Furious", "Cars and guns");

DROP TABLE IF EXISTS  SHOWING;
CREATE TABLE SHOWING(
	ShowingID int NOT NULL AUTO_INCREMENT,
    MovieID int NOT NULL, 
    ShowTime DATETIME,
    TicketPrice float,
    TheatreID int,
    PRIMARY KEY(ShowingID),
    FOREIGN KEY ( MovieID ) REFERENCES MOVIE(MovieID));
    
INSERT INTO Showing(MovieID, ShowTime, TicketPrice, TheatreID)
VALUES
(1, "2021-12-20 20:05:00", 12.50, 1),
(2, "2021-12-22 20:05:00", 9.00, 1),
(3, "2021-12-21 20:05:00", 12.00, 1),
(4, "2021-12-24 20:05:00", 9.00, 1),
(5, "2021-12-25 20:05:00", 7.00, 1),
(6, "2021-12-26 20:05:00", 6.00, 1),
(7, "2021-12-28 20:05:00", 8.00, 1),
(1, "2021-12-3 20:05:00", 10.30, 1),
(1, "2021-12-6 20:05:00", 12.90, 1)
;

    
DROP TABLE IF EXISTS USER;
CREATE TABLE USER(
	UserID int NOT NULL AUTO_INCREMENT,
    IsRegistered BOOL,
    Name varchar(25),
    Address varchar(50),
    Email varchar(50),
    Password varchar(15),
    ActiveStatus BOOL,
    LastPaymentDate DATETIME,
    PaymentMethod varchar(10),
    PaymentNumber float(20),
    PRIMARY KEY(UserID));
Insert INTO USER(IsRegistered, Name, Address, Email, Password, ActiveStatus, LastPaymentDate, PaymentMethod, PaymentNumber)
Values
(True, "Kody", "CALGARY SOMEWHERE", "kodykou@ucalgary.ca", "fakepassword", True, "2020-12-20 00:00:00", "Debit", "0000000000000000"),
(True, "Jared", "CALGARY SOMEWHEREELSE", "JARED@uc.ca", "fakepassword1", False, "2019-12-20 00:00:00", "Credit", "100000000000000"),
(True, "Mike", "Calgarylowercased", "mikek@ucalgary.ca", "fakepassword2", True, "2021-10-20 00:00:00", "Debit", "2002002000200200"),
(True, "Nic", "calgary4thspelling", "nickl@ucalgary.ca", "fakepassword3", False, "0000-00-00 00:00:00", "", -1),
(False, "", "", "nonregistereduser@ucalgary.ca", "", False, "0000-00-00 00:00:00", "", -1 );
    
CREATE TABLE SEATS(
	ShowingID int,
    rownum char,
    colnum int,
    reserved BOOL,
    FOREIGN KEY (ShowingID) REFERENCES SHOWING(ShowingID),
    PRIMARY KEY(ShowingID, rownum, colnum));
    
CREATE TABLE TICKETS(
	TicketID int NOT NULL AUTO_INCREMENT,
    ShowingID int, 
    rownum char,
	colnum int,
    PRIMARY KEY(TicketID),
    FOREIGN KEY(ShowingID) REFERENCES SHOWING(ShowingID));
INSERT INTO TICKETS(ShowingID, rownum, colnum)
VALUES
(1, 'A', 3),
(1, 'A', 4),
(1, 'A', 2),
(1, 'C', 6),
(2, 'F', 10),
(2, 'B', 4),
(3, 'A', 3),
(4, 'C', 5),
(5, 'F', 7),
(6, 'D', 5),
(5, 'D', 3),
(6, 'E', 3),
(7, 'C', 8);

    
CREATE TABLE TRANSACTION(
	TransactionID int NOT NULL AUTO_INCREMENT,
    UserID int,
    Cost float,
    PurchaseDate DATETIME, 
    PaymentMethod varchar(10),
    PaymentNumber float(20),
    PRIMARY KEY(TransactionID),
    FOREIGN KEY(UserID) REFERENCES USER(UserID)
    );
INSERT INTO TRANSACTION(UserID, Cost, PurchaseDate, PaymentMethod, PaymentNumber)
VALUES
(1, 59,  "2021-12-01 00:00:00", "Debit", 0),
(2,  43, "2021-12-04 00:00:00", "Credit", 100000000000000),
(3, 21, "2021-05-03 00:00:00", "Debit", 2002002000200200);

CREATE TABLE TRANSACTIONTICKETS(
	TransactionID int,
    TicketID int,
    PRIMARY KEY(TicketID),
    FOREIGN KEY (TicketID) REFERENCES TICKETS(TicketID),
    FOREIGN KEY (TransactionID) REFERENCES TRANSACTION(TransactionID));
INSERT INTO TRANSACTIONTICKETS (TransactionID, TicketID) 
VALUES
(1, 1),
(1, 2),
(1,3),
(1,4),
(1,5),
(2, 6),
(2, 7),
(2, 8),
(2, 9),
(2,10),
(3,11),
(3,12),
(3,13);



CREATE TABLE MovieCredits(
	CreditID int NOT NULL AUTO_INCREMENT,
    CreditCode varchar(20),
    ExpiryDate DATETIME, 
    Amount float,
	UserID int,
    PRIMARY KEY(CreditID),
    FOREIGN KEY(UserID) REFERENCES USER(UserID)
    );
INSERT INTO MovieCredits(CreditCode, ExpiryDate, Amount, UserID)
Values
("Refund", "2023-12-25 00:00:00", 12.00, 1),
("Promotional discount", "2021-12-25 00:00:00", 10.00, 2),
("Refund", "2020-12-25 00:00:00", 8.00, 2),
("Error compensation", "2024-12-25 00:00:00", 50.00, 1),
("Refund", "2023-12-25 00:00:00", 12.00, 3);

    
    
INSERT INTO Seats(ShowingID, rownum, colnum, reserved)
VALUES
(1, 'A',1, False),
(1, 'A',2, True),
(1, 'A',3, True),
(1, 'A',4, True),
(1, 'A',5, False),
(1, 'A',6, False),
(1, 'A',7, False),
(1, 'A',8, False),
(1, 'A',9, False),
(1, 'A',10, False),
(1, 'B',1, False),
(1, 'B',2, False),
(1, 'B',3, False),
(1, 'B',4, False),
(1, 'B',5, False),
(1, 'B',6, False),
(1, 'B',7, False),
(1, 'B',8, False),
(1, 'B',9, False),
(1, 'B',10, False),
(1, 'C',1, False),
(1, 'C',2, False),
(1, 'C',3, False),
(1, 'C',4, False),
(1, 'C',5, False),
(1, 'C',6, True),
(1, 'C',7, False),
(1, 'C',8, False),
(1, 'C',9, False),
(1, 'C',10, False),
(1, 'D',1, False),
(1, 'D',2, False),
(1, 'D',3, False),
(1, 'D',4, False),
(1, 'D',5, False),
(1, 'D',6, False),
(1, 'D',7, False),
(1, 'D',8, False),
(1, 'D',9, False),
(1, 'D',10, False),
(1, 'E',1, False),
(1, 'E',2, False),
(1, 'E',3, False),
(1, 'E',4, False),
(1, 'E',5, False),
(1, 'E',6, False),
(1, 'E',7, False),
(1, 'E',8, False),
(1, 'E',9, False),
(1, 'E',10, False),
(1, 'F',1, False),
(1, 'F',2, False),
(1, 'F',3, False),
(1, 'F',4, False),
(1, 'F',5, False),
(1, 'F',6, False),
(1, 'F',7, False),
(1, 'F',8, False),
(1, 'F',9, False),
(1, 'F',10, False),
(2, 'A',1, False),
(2, 'A',2, False),
(2, 'A',3, False),
(2, 'A',4, False),
(2, 'A',5, False),
(2, 'A',6, False),
(2, 'A',7, False),
(2, 'A',8, False),
(2, 'A',9, False),
(2, 'A',10, False),
(2, 'B',1, False),
(2, 'B',2, False),
(2, 'B',3, False),
(2, 'B',4, True),
(2, 'B',5, False),
(2, 'B',6, False),
(2, 'B',7, False),
(2, 'B',8, False),
(2, 'B',9, False),
(2, 'B',10, False),
(2, 'C',1, False),
(2, 'C',2, False),
(2, 'C',3, False),
(2, 'C',4, False),
(2, 'C',5, False),
(2, 'C',6, False),
(2, 'C',7, False),
(2, 'C',8, False),
(2, 'C',9, False),
(2, 'C',10, False),
(2, 'D',1, False),
(2, 'D',2, False),
(2, 'D',3, False),
(2, 'D',4, False),
(2, 'D',5, False),
(2, 'D',6, False),
(2, 'D',7, False),
(2, 'D',8, False),
(2, 'D',9, False),
(2, 'D',10, False),
(2, 'E',1, False),
(2, 'E',2, False),
(2, 'E',3, False),
(2, 'E',4, False),
(2, 'E',5, False),
(2, 'E',6, False),
(2, 'E',7, False),
(2, 'E',8, False),
(2, 'E',9, False),
(2, 'E',10, False),
(2, 'F',1, False),
(2, 'F',2, False),
(2, 'F',3, False),
(2, 'F',4, False),
(2, 'F',5, False),
(2, 'F',6, False),
(2, 'F',7, False),
(2, 'F',8, False),
(2, 'F',9, False),
(2, 'F',10, True),
(3, 'A',1, False),
(3, 'A',2, False),
(3, 'A',3, True),
(3, 'A',4, False),
(3, 'A',5, False),
(3, 'A',6, False),
(3, 'A',7, False),
(3, 'A',8, False),
(3, 'A',9, False),
(3, 'A',10, False),
(3, 'B',1, False),
(3, 'B',2, False),
(3, 'B',3, False),
(3, 'B',4, False),
(3, 'B',5, False),
(3, 'B',6, False),
(3, 'B',7, False),
(3, 'B',8, False),
(3, 'B',9, False),
(3, 'B',10, False),
(3, 'C',1, False),
(3, 'C',2, False),
(3, 'C',3, False),
(3, 'C',4, False),
(3, 'C',5, False),
(3, 'C',6, False),
(3, 'C',7, False),
(3, 'C',8, False),
(3, 'C',9, False),
(3, 'C',10, False),
(3, 'D',1, False),
(3, 'D',2, False),
(3, 'D',3, False),
(3, 'D',4, False),
(3, 'D',5, False),
(3, 'D',6, False),
(3, 'D',7, False),
(3, 'D',8, False),
(3, 'D',9, False),
(3, 'D',10, False),
(3, 'E',1, False),
(3, 'E',2, False),
(3, 'E',3, False),
(3, 'E',4, False),
(3, 'E',5, False),
(3, 'E',6, False),
(3, 'E',7, False),
(3, 'E',8, False),
(3, 'E',9, False),
(3, 'E',10, False),
(3, 'F',1, False),
(3, 'F',2, False),
(3, 'F',3, False),
(3, 'F',4, False),
(3, 'F',5, False),
(3, 'F',6, False),
(3, 'F',7, False),
(3, 'F',8, False),
(3, 'F',9, False),
(3, 'F',10, False),
(4, 'A',1, False),
(4, 'A',2, False),
(4, 'A',3, False),
(4, 'A',4, False),
(4, 'A',5, False),
(4, 'A',6, False),
(4, 'A',7, False),
(4, 'A',8, False),
(4, 'A',9, False),
(4, 'A',10, False),
(4, 'B',1, False),
(4, 'B',2, False),
(4, 'B',3, False),
(4, 'B',4, False),
(4, 'B',5, False),
(4, 'B',6, False),
(4, 'B',7, False),
(4, 'B',8, False),
(4, 'B',9, False),
(4, 'B',10, False),
(4, 'C',1, False),
(4, 'C',2, False),
(4, 'C',3, False),
(4, 'C',4, False),
(4, 'C',5, True),
(4, 'C',6, False),
(4, 'C',7, False),
(4, 'C',8, False),
(4, 'C',9, False),
(4, 'C',10, False),
(4, 'D',1, False),
(4, 'D',2, False),
(4, 'D',3, False),
(4, 'D',4, False),
(4, 'D',5, False),
(4, 'D',6, False),
(4, 'D',7, False),
(4, 'D',8, False),
(4, 'D',9, False),
(4, 'D',10, False),
(4, 'E',1, False),
(4, 'E',2, False),
(4, 'E',3, False),
(4, 'E',4, False),
(4, 'E',5, False),
(4, 'E',6, False),
(4, 'E',7, False),
(4, 'E',8, False),
(4, 'E',9, False),
(4, 'E',10, False),
(4, 'F',1, False),
(4, 'F',2, False),
(4, 'F',3, False),
(4, 'F',4, False),
(4, 'F',5, False),
(4, 'F',6, False),
(4, 'F',7, False),
(4, 'F',8, False),
(4, 'F',9, False),
(4, 'F',10, False),
(5, 'A',1, False),
(5, 'A',2, False),
(5, 'A',3, False),
(5, 'A',4, False),
(5, 'A',5, False),
(5, 'A',6, False),
(5, 'A',7, False),
(5, 'A',8, False),
(5, 'A',9, False),
(5, 'A',10, False),
(5, 'B',1, False),
(5, 'B',2, False),
(5, 'B',3, False),
(5, 'B',4, False),
(5, 'B',5, False),
(5, 'B',6, False),
(5, 'B',7, False),
(5, 'B',8, False),
(5, 'B',9, False),
(5, 'B',10, False),
(5, 'C',1, False),
(5, 'C',2, False),
(5, 'C',3, False),
(5, 'C',4, False),
(5, 'C',5, False),
(5, 'C',6, False),
(5, 'C',7, False),
(5, 'C',8, False),
(5, 'C',9, False),
(5, 'C',10, False),
(5, 'D',1, False),
(5, 'D',2, False),
(5, 'D',3, True),
(5, 'D',4, False),
(5, 'D',5, False),
(5, 'D',6, False),
(5, 'D',7, False),
(5, 'D',8, False),
(5, 'D',9, False),
(5, 'D',10, False),
(5, 'E',1, False),
(5, 'E',2, False),
(5, 'E',3, False),
(5, 'E',4, False),
(5, 'E',5, False),
(5, 'E',6, False),
(5, 'E',7, False),
(5, 'E',8, False),
(5, 'E',9, False),
(5, 'E',10, False),
(5, 'F',1, False),
(5, 'F',2, False),
(5, 'F',3, False),
(5, 'F',4, False),
(5, 'F',5, False),
(5, 'F',6, False),
(5, 'F',7, True),
(5, 'F',8, False),
(5, 'F',9, False),
(5, 'F',10, False),
(6, 'A',1, False),
(6, 'A',2, False),
(6, 'A',3, False),
(6, 'A',4, False),
(6, 'A',5, False),
(6, 'A',6, False),
(6, 'A',7, False),
(6, 'A',8, False),
(6, 'A',9, False),
(6, 'A',10, False),
(6, 'B',1, False),
(6, 'B',2, False),
(6, 'B',3, False),
(6, 'B',4, False),
(6, 'B',5, False),
(6, 'B',6, False),
(6, 'B',7, False),
(6, 'B',8, False),
(6, 'B',9, False),
(6, 'B',10, False),
(6, 'C',1, False),
(6, 'C',2, False),
(6, 'C',3, False),
(6, 'C',4, False),
(6, 'C',5, False),
(6, 'C',6, False),
(6, 'C',7, False),
(6, 'C',8, False),
(6, 'C',9, False),
(6, 'C',10, False),
(6, 'D',1, False),
(6, 'D',2, False),
(6, 'D',3, False),
(6, 'D',4, False),
(6, 'D',5,True),
(6, 'D',6, False),
(6, 'D',7, False),
(6, 'D',8, False),
(6, 'D',9, False),
(6, 'D',10, False),
(6, 'E',1, False),
(6, 'E',2, False),
(6, 'E',3, True),
(6, 'E',4, False),
(6, 'E',5, False),
(6, 'E',6, False),
(6, 'E',7, False),
(6, 'E',8, False),
(6, 'E',9, False),
(6, 'E',10, False),
(6, 'F',1, False),
(6, 'F',2, False),
(6, 'F',3, False),
(6, 'F',4, False),
(6, 'F',5, False),
(6, 'F',6, False),
(6, 'F',7, False),
(6, 'F',8, False),
(6, 'F',9, False),
(6, 'F',10, False),
(7, 'A',1, False),
(7, 'A',2, False),
(7, 'A',3, False),
(7, 'A',4, False),
(7, 'A',5, False),
(7, 'A',6, False),
(7, 'A',7, False),
(7, 'A',8, False),
(7, 'A',9, False),
(7, 'A',10, False),
(7, 'B',1, False),
(7, 'B',2, False),
(7, 'B',3, False),
(7, 'B',4, False),
(7, 'B',5, False),
(7, 'B',6, False),
(7, 'B',7, False),
(7, 'B',8, False),
(7, 'B',9, False),
(7, 'B',10, False),
(7, 'C',1, False),
(7, 'C',2, False),
(7, 'C',3, False),
(7, 'C',4, False),
(7, 'C',5, False),
(7, 'C',6, False),
(7, 'C',7, False),
(7, 'C',8, True),
(7, 'C',9, False),
(7, 'C',10, False),
(7, 'D',1, False),
(7, 'D',2, False),
(7, 'D',3, False),
(7, 'D',4, False),
(7, 'D',5, False),
(7, 'D',6, False),
(7, 'D',7, False),
(7, 'D',8, False),
(7, 'D',9, False),
(7, 'D',10, False),
(7, 'E',1, False),
(7, 'E',2, False),
(7, 'E',3, False),
(7, 'E',4, False),
(7, 'E',5, False),
(7, 'E',6, False),
(7, 'E',7, False),
(7, 'E',8, False),
(7, 'E',9, False),
(7, 'E',10, False),
(7, 'F',1, False),
(7, 'F',2, False),
(7, 'F',3, False),
(7, 'F',4, False),
(7, 'F',5, False),
(7, 'F',6, False),
(7, 'F',7, False),
(7, 'F',8, False),
(7, 'F',9, False),
(7, 'F',10, False),
(8, 'A',1, False),
(8, 'A',2, False),
(8, 'A',3, False),
(8, 'A',4, False),
(8, 'A',5, False),
(8, 'A',6, False),
(8, 'A',7, False),
(8, 'A',8, False),
(8, 'A',9, False),
(8, 'A',10, False),
(8, 'B',1, False),
(8, 'B',2, False),
(8, 'B',3, False),
(8, 'B',4, False),
(8, 'B',5, False),
(8, 'B',6, False),
(8, 'B',7, False),
(8, 'B',8, False),
(8, 'B',9, False),
(8, 'B',10, False),
(8, 'C',1, False),
(8, 'C',2, False),
(8, 'C',3, False),
(8, 'C',4, False),
(8, 'C',5, False),
(8, 'C',6, False),
(8, 'C',7, False),
(8, 'C',8, False),
(8, 'C',9, False),
(8, 'C',10, False),
(8, 'D',1, False),
(8, 'D',2, False),
(8, 'D',3, False),
(8, 'D',4, False),
(8, 'D',5, False),
(8, 'D',6, False),
(8, 'D',7, False),
(8, 'D',8, False),
(8, 'D',9, False),
(8, 'D',10, False),
(8, 'E',1, False),
(8, 'E',2, False),
(8, 'E',3, False),
(8, 'E',4, False),
(8, 'E',5, False),
(8, 'E',6, False),
(8, 'E',7, False),
(8, 'E',8, False),
(8, 'E',9, False),
(8, 'E',10, False),
(8, 'F',1, False),
(8, 'F',2, False),
(8, 'F',3, False),
(8, 'F',4, False),
(8, 'F',5, False),
(8, 'F',6, False),
(8, 'F',7, False),
(8, 'F',8, False),
(8, 'F',9, False),
(8, 'F',10, False),
(9, 'A',1, False),
(9, 'A',2, False),
(9, 'A',3, False),
(9, 'A',4, False),
(9, 'A',5, False),
(9, 'A',6, False),
(9, 'A',7, False),
(9, 'A',8, False),
(9, 'A',9, False),
(9, 'A',10, False),
(9, 'B',1, False),
(9, 'B',2, False),
(9, 'B',3, False),
(9, 'B',4, False),
(9, 'B',5, False),
(9, 'B',6, False),
(9, 'B',7, False),
(9, 'B',8, False),
(9, 'B',9, False),
(9, 'B',10, False),
(9, 'C',1, False),
(9, 'C',2, False),
(9, 'C',3, False),
(9, 'C',4, False),
(9, 'C',5, False),
(9, 'C',6, False),
(9, 'C',7, False),
(9, 'C',8, False),
(9, 'C',9, False),
(9, 'C',10, False),
(9, 'D',1, False),
(9, 'D',2, False),
(9, 'D',3, False),
(9, 'D',4, False),
(9, 'D',5, False),
(9, 'D',6, False),
(9, 'D',7, False),
(9, 'D',8, False),
(9, 'D',9, False),
(9, 'D',10, False),
(9, 'E',1, False),
(9, 'E',2, False),
(9, 'E',3, False),
(9, 'E',4, False),
(9, 'E',5, False),
(9, 'E',6, False),
(9, 'E',7, False),
(9, 'E',8, False),
(9, 'E',9, False),
(9, 'E',10, False),
(9, 'F',1, False),
(9, 'F',2, False),
(9, 'F',3, False),
(9, 'F',4, False),
(9, 'F',5, False),
(9, 'F',6, False),
(9, 'F',7, False),
(9, 'F',8, False),
(9, 'F',9, False),
(9, 'F',10, False);
    
	
    

    
    
    
    

